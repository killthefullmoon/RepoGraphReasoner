{
  "tasks": [
    {
      "task_title": "Launch the GUI server",
      "task_description": "启动OpenHands的图形用户界面服务器。",
      "example_code": null,
      "running_command": "uvx --python 3.12 --from openhands-ai openhands serve",
      "expected_input": null,
      "expected_output": "GUI server is running"
    },
    {
      "task_title": "Launch the CLI",
      "task_description": "启动OpenHands的命令行界面。",
      "example_code": null,
      "running_command": "uvx --python 3.12 --from openhands-ai openhands",
      "expected_input": null,
      "expected_output": "CLI is running"
    }
  ],
  "setup": {
    "setup_commands": [],
    "docker_commands": [
      "docker pull docker.openhands.dev/openhands/runtime:0.60-nikolaik\n\ndocker run -it --rm --pull=always \\\n    -e SANDBOX_RUNTIME_CONTAINER_IMAGE=docker.openhands.dev/openhands/runtime:0.60-nikolaik \\\n    -e LOG_ALL_EVENTS=true \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    -v ~/.openhands:/.openhands \\\n    -p 3000:3000 \\\n    --add-host host.docker.internal:host-gateway \\\n    --name openhands-app \\\n    docker.openhands.dev/openhands/openhands:0.60"
    ],
    "docker_files": {
      "docker-compose.yml": "\nservices:\n  openhands:\n    build:\n      context: ./\n      dockerfile: ./containers/app/Dockerfile\n    image: openhands:latest\n    container_name: openhands-app-${DATE:-}\n    environment:\n      - SANDBOX_RUNTIME_CONTAINER_IMAGE=${SANDBOX_RUNTIME_CONTAINER_IMAGE:-docker.openhands.dev/openhands/runtime:0.60-nikolaik}\n      #- SANDBOX_USER_ID=${SANDBOX_USER_ID:-1234} # enable this only if you want a specific non-root sandbox user but you will have to manually adjust permissions of ~/.openhands for this user\n      - WORKSPACE_MOUNT_PATH=${WORKSPACE_BASE:-$PWD/workspace}\n    ports:\n      - \"3000:3000\"\n    extra_hosts:\n      - \"host.docker.internal:host-gateway\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ~/.openhands:/.openhands\n      - ${WORKSPACE_BASE:-$PWD/workspace}:/opt/workspace_base\n    pull_policy: build\n    stdin_open: true\n    tty: true\n",
      ".dockerignore": "# NodeJS\nfrontend/node_modules\n\n# Configuration (except pyproject.toml)\n*.ini\n*.toml\n!pyproject.toml\n*.yml\n\n# Documentation (except README.md)\n*.md\n!README.md\n\n# Hidden files and directories\n.*\n__pycache__\n\n# Unneded files and directories\n/dev_config/\n/docs/\n/evaluation/\n/tests/\nCITATION.cff\n"
    },
    "docker_setup_descriptions": {
      "docker-compose.yml": "### Building and Running Docker with `docker-compose.yml` for OpenHands\n\nTo build and run the OpenHands application using the provided `docker-compose.yml` file, follow these steps:\n\n1. **Prerequisites**:\n   - Ensure you have Docker and Docker Compose installed on your machine.\n\n2. **Clone the Repository**:\n   ```bash\n   git clone https://github.com/OpenHands/OpenHands.git\n   cd OpenHands\n   ```\n\n3. **Build and Start the Application**:\n   Run the following command in the directory containing the `docker-compose.yml` file:\n   ```bash\n   docker-compose up --build\n   ```\n\n### Semantic Meaning of the `docker-compose.yml` File\n\n- **services**: Defines the services that make up your application. In this case, there is one service named `openhands`.\n\n- **openhands**: This is the main service for the OpenHands application.\n  - **build**: Specifies how to build the Docker image.\n    - **context**: The directory containing the Dockerfile (current directory `./`).\n    - **dockerfile**: The path to the Dockerfile used for building the image (`./containers/app/Dockerfile`).\n  - **image**: Names the built image (`openhands:latest`).\n  - **container_name**: Sets the name of the container, allowing for dynamic naming based on the `DATE` environment variable.\n  - **environment**: Defines environment variables for the container.\n    - `SANDBOX_RUNTIME_CONTAINER_IMAGE`: Specifies the image for the sandbox runtime, with a default value.\n    - `WORKSPACE_MOUNT_PATH`: Sets the path for the workspace mount, defaulting to the current directory's `workspace`.\n  - **ports**: Maps port 3000 on the host to port 3000 on the container.\n  - **extra_hosts**: Adds a host entry to allow the container to communicate with the host.\n  - **volumes**: Mounts necessary volumes for Docker socket access and user data.\n    - `/var/run/docker.sock`: Allows the container to communicate with the Docker daemon.\n    - `~/.openhands`: Mounts the user's OpenHands configuration directory.\n    - `${WORKSPACE_BASE}`: Maps the workspace directory for shared access.\n  - **pull_policy**: Indicates that the image should be built rather than pulled from a registry.\n  - **stdin_open**: Keeps the standard input open for the container.\n  - **tty**: Allocates a pseudo-TTY, useful for interactive applications.\n\n### Related Docker Commands\n\nIf you prefer to run the application without Docker Compose, you can use the following command:\n\n```bash\ndocker run -it --rm --pull=always \\\n    -e SANDBOX_RUNTIME_CONTAINER_IMAGE=docker.openhands.dev/openhands/runtime:0.60-nikolaik \\\n    -e LOG_ALL_EVENTS=true \\\n    -v /var/run/docker.sock:/var/run/docker.sock \\\n    -v ~/.openhands:/.openhands \\\n    -p 3000:3000 \\\n    --add-host host.docker.internal:host-gateway \\\n    --name openhands-app \\\n    docker.openhands.dev/openhands/openhands:0.60\n```\n\nThis command runs the OpenHands application in a Docker container with the necessary environment variables and volume mounts.",
      ".dockerignore": "### Building and Running Docker with OpenHands\n\nTo build and run the OpenHands application using Docker, follow these steps, ensuring you understand the purpose of the `.dockerignore` file included in the repository.\n\n#### Understanding `.dockerignore`\n\nThe `.dockerignore` file specifies which files and directories should be excluded from the Docker build context. This helps to reduce the size of the Docker image and speeds up the build process by preventing unnecessary files from being sent to the Docker daemon. The contents of the `.dockerignore` file for the OpenHands repository are as follows:\n\n- **NodeJS Dependencies**: Excludes `frontend/node_modules` to avoid including local dependencies in the image.\n- **Configuration Files**: Excludes all `.ini` and `.yml` files but includes `pyproject.toml`, ensuring only essential configuration is included.\n- **Documentation**: Excludes all markdown files except `README.md`, keeping only the primary documentation.\n- **Hidden Files**: Excludes all hidden files and directories (those starting with a dot) and `__pycache__` directories to avoid unnecessary clutter.\n- **Unneeded Directories**: Excludes specific directories like `/dev_config/`, `/docs/`, `/evaluation/`, `/tests/`, and the file `CITATION.cff`, which are not required for the runtime environment.\n\n#### Steps to Build and Run Docker\n\n1. **Pull the Docker Image**:\n   Execute the following command to pull the required Docker image:\n   ```bash\n   docker pull docker.openhands.dev/openhands/runtime:0.60-nikolaik\n   ```\n\n2. **Run the Docker Container**:\n   Use the command below to run the OpenHands application in a Docker container:\n   ```bash\n   docker run -it --rm --pull=always \\\n       -e SANDBOX_RUNTIME_CONTAINER_IMAGE=docker.openhands.dev/openhands/runtime:0.60-nikolaik \\\n       -e LOG_ALL_EVENTS=true \\\n       -v /var/run/docker.sock:/var/run/docker.sock \\\n       -v ~/.openhands:/.openhands \\\n       -p 3000:3000 \\\n       --add-host host.docker.internal:host-gateway \\\n       --name openhands-app \\\n       docker.openhands.dev/openhands/openhands:0.60\n   ```\n\n#### Notes:\n- Ensure Docker is installed and running on your machine.\n- Adjust volume mounts (`-v`) as necessary for your environment.\n- The `--add-host` flag allows the container to access the host's network, which may be necessary for certain configurations.\n\nBy following these steps, you can effectively build and run the OpenHands application using Docker while adhering to best practices in managing your build context with the `.dockerignore` file."
    }
  },
  "input_to_gpt": {
    "repo_name": "OpenHands/OpenHands",
    "num_code_blocks": 1,
    "total_length": 146,
    "code_blocks": [
      "# Launch the GUI server\nuvx --python 3.12 --from openhands-ai openhands serve\n\n# Or launch the CLI\nuvx --python 3.12 --from openhands-ai openhands"
    ]
  }
}