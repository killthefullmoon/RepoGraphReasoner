{
  "repo": {
    "full_name": "psf/black",
    "stars": 41105,
    "forks": 2655,
    "language": "Python",
    "description": "The uncompromising Python code formatter",
    "topics": [
      "autopep8",
      "code",
      "codeformatter",
      "formatter",
      "gofmt",
      "hacktoberfest",
      "pre-commit-hook",
      "python",
      "yapf"
    ],
    "url": "https://github.com/psf/black",
    "created_at": "2018-03-14T19:54:45Z",
    "updated_at": "2025-10-30T18:02:47Z"
  },
  "readme_file": "dataset/readmes/black_README.md",
  "task_file": "dataset/tasks/black_tasks.json",
  "num_tasks": 2,
  "num_setup_commands": 0,
  "num_docker_commands": 0,
  "has_docker_files": true,
  "docker_files_list": [
    "Dockerfile"
  ],
  "docker_setup_descriptions": {
    "Dockerfile": "### Building and Running Docker for the `psf/black` Repository\n\n#### Overview of the Dockerfile\n\nThe provided Dockerfile is designed to create a Docker image for the `psf/black` project, a code formatter for Python. It employs a multi-stage build process to optimize the final image size by separating the build environment from the runtime environment.\n\n#### Semantic Breakdown of the Dockerfile\n\n1. **Base Image**: \n   - `FROM python:3.12-slim AS builder`: This line specifies the base image as a lightweight version of Python 3.12, setting up an environment for building the application.\n\n2. **Directory Creation**:\n   - `RUN mkdir /src`: Creates a directory `/src` in the container where the application code will reside.\n\n3. **Code Copying**:\n   - `COPY . /src/`: Copies the entire content of the current directory (the application code) into the `/src` directory in the container.\n\n4. **Environment Variables**:\n   - `ENV VIRTUAL_ENV=/opt/venv`: Sets the virtual environment path.\n   - `ENV HATCH_BUILD_HOOKS_ENABLE=1`: Enables build hooks for the Hatch tool, which is used for building Python packages.\n\n5. **Build Tools Installation**:\n   - `RUN apt update && apt install -y build-essential git python3-dev`: Installs necessary build tools and dependencies required to compile the application.\n\n6. **Virtual Environment Setup**:\n   - `RUN python -m venv $VIRTUAL_ENV`: Creates a virtual environment in the specified path.\n\n7. **Dependency Installation**:\n   - `RUN python -m pip install --no-cache-dir hatch hatch-fancy-pypi-readme hatch-vcs`: Installs Hatch and its related tools without caching to reduce image size.\n   - `RUN . /opt/venv/bin/activate && pip install --no-cache-dir --upgrade pip setuptools`: Activates the virtual environment and upgrades pip and setuptools.\n   - `&& cd /src && hatch build -t wheel`: Navigates to the source directory and builds the package into a wheel format.\n   - `&& pip install --no-cache-dir dist/*-cp*`: Installs the built package from the dist directory.\n   - `&& pip install black[colorama,d,uvloop]`: Installs the `black` formatter with additional optional dependencies.\n\n8. **Final Image Setup**:\n   - `FROM python:3.12-slim`: Starts a new stage with a clean, slim Python image for the final runtime environment.\n   - `COPY --from=builder /opt/venv /opt/venv`: Copies the virtual environment from the builder stage to the final image.\n   - `ENV PATH=\"/opt/venv/bin:$PATH\"`: Updates the PATH environment variable to include the virtual environment's binaries.\n\n9. **Command Execution**:\n   - `CMD [\"/opt/venv/bin/black\"]`: Specifies the default command to run when the container starts, which is the `black` formatter.\n\n#### Instructions to Build and Run\n\n1. **Build the Docker Image**:\n   Open a terminal and navigate to the directory containing the Dockerfile. Run the following command to build the Docker image:\n   ```bash\n   docker build -t black-formatter .\n   ```\n\n2. **Run the Docker Container**:\n   After the image is built, you can run the container with the following command:\n   ```bash\n   docker run --rm -v $(pwd):/workspace black-formatter /workspace\n   ```\n   This command mounts the current directory to `/workspace` in the container, allowing `black` to format the Python files in your project.\n\n#### Note\nEnsure that Docker is installed and running on your machine before executing these commands."
  },
  "processed_at": "2025-10-30T20:55:45.151292"
}