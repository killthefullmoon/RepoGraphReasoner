{
  "tasks": [
    {
      "task_title": "获取人脸位置",
      "task_description": "加载图像并获取其中所有人脸的位置坐标。",
      "example_code": "import face_recognition\nimage = face_recognition.load_image_file(\"my_picture.jpg\")\nface_locations = face_recognition.face_locations(image)",
      "running_command": null,
      "expected_input": "my_picture.jpg",
      "expected_output": "人脸位置的坐标数组"
    },
    {
      "task_title": "获取人脸特征点",
      "task_description": "加载图像并获取其中所有人脸的特征点位置。",
      "example_code": "import face_recognition\nimage = face_recognition.load_image_file(\"my_picture.jpg\")\nface_landmarks_list = face_recognition.face_landmarks(image)",
      "running_command": null,
      "expected_input": "my_picture.jpg",
      "expected_output": "人脸特征点的数组"
    },
    {
      "task_title": "人脸编码比较",
      "task_description": "加载已知和未知图像，获取人脸编码并比较二者是否为同一人。",
      "example_code": "import face_recognition\nknown_image = face_recognition.load_image_file(\"biden.jpg\")\nunknown_image = face_recognition.load_image_file(\"unknown.jpg\")\nbiden_encoding = face_recognition.face_encodings(known_image)[0]\nunknown_encoding = face_recognition.face_encodings(unknown_image)[0]\nresults = face_recognition.compare_faces([biden_encoding], unknown_encoding)",
      "running_command": null,
      "expected_input": "biden.jpg, unknown.jpg",
      "expected_output": "[True/False]"
    },
    {
      "task_title": "批量人脸识别",
      "task_description": "识别指定文件夹中的未知人脸，并与已知人脸进行比较。",
      "example_code": null,
      "running_command": "face_recognition ./pictures_of_people_i_know/ ./unknown_pictures/",
      "expected_input": "./pictures_of_people_i_know/, ./unknown_pictures/",
      "expected_output": "/unknown_pictures/unknown.jpg,Barack Obama\n/face_recognition_test/unknown_pictures/unknown.jpg,unknown_person"
    },
    {
      "task_title": "人脸检测",
      "task_description": "检测指定文件夹中的所有图像中的人脸位置。",
      "example_code": null,
      "running_command": "face_detection  ./folder_with_pictures/",
      "expected_input": "./folder_with_pictures/",
      "expected_output": "examples/image1.jpg,65,215,169,112\nexamples/image2.jpg,62,394,211,244\nexamples/image2.jpg,95,941,244,792"
    },
    {
      "task_title": "设置容差进行人脸比较",
      "task_description": "设置容差值来进行人脸比较识别。",
      "example_code": null,
      "running_command": "face_recognition --tolerance 0.54 ./pictures_of_people_i_know/ ./unknown_pictures/",
      "expected_input": "./pictures_of_people_i_know/, ./unknown_pictures/",
      "expected_output": "/unknown_pictures/unknown.jpg,Barack Obama\n/face_recognition_test/unknown_pictures/unknown.jpg,unknown_person"
    },
    {
      "task_title": "显示距离进行人脸比较",
      "task_description": "在识别结果中显示人脸编码之间的距离。",
      "example_code": null,
      "running_command": "face_recognition --show-distance true ./pictures_of_people_i_know/ ./unknown_pictures/",
      "expected_input": "./pictures_of_people_i_know/, ./unknown_pictures/",
      "expected_output": "/unknown_pictures/unknown.jpg,Barack Obama,0.378542298956785\n/face_recognition_test/unknown_pictures/unknown.jpg,unknown_person,None"
    },
    {
      "task_title": "并行处理人脸识别",
      "task_description": "使用多个CPU进行人脸识别以提高效率。",
      "example_code": null,
      "running_command": "face_recognition --cpus 4 ./pictures_of_people_i_know/ ./unknown_pictures/",
      "expected_input": "./pictures_of_people_i_know/, ./unknown_pictures/",
      "expected_output": "识别结果"
    },
    {
      "task_title": "判断是否为本人",
      "task_description": "比较自己和未知图像的人脸编码，判断是否为同一人。",
      "example_code": "import face_recognition\npicture_of_me = face_recognition.load_image_file(\"me.jpg\")\nmy_face_encoding = face_recognition.face_encodings(picture_of_me)[0]\nunknown_picture = face_recognition.load_image_file(\"unknown.jpg\")\nunknown_face_encoding = face_recognition.face_encodings(unknown_picture)[0]\nresults = face_recognition.compare_faces([my_face_encoding], unknown_face_encoding)\nif results[0] == True:\n    print(\"It's a picture of me!\")\nelse:\n    print(\"It's not a picture of me!\")",
      "running_command": null,
      "expected_input": "me.jpg, unknown.jpg",
      "expected_output": "It's a picture of me!\n或\nIt's not a picture of me!"
    }
  ],
  "setup": {
    "setup_commands": [],
    "docker_commands": [],
    "docker_files": {
      "Dockerfile": "# This is a sample Dockerfile you can modify to deploy your own app based on face_recognition\n\nFROM python:3.10.3-slim-bullseye\n\nRUN apt-get -y update\nRUN apt-get install -y --fix-missing \\\n    build-essential \\\n    cmake \\\n    gfortran \\\n    git \\\n    wget \\\n    curl \\\n    graphicsmagick \\\n    libgraphicsmagick1-dev \\\n    libatlas-base-dev \\\n    libavcodec-dev \\\n    libavformat-dev \\\n    libgtk2.0-dev \\\n    libjpeg-dev \\\n    liblapack-dev \\\n    libswscale-dev \\\n    pkg-config \\\n    python3-dev \\\n    python3-numpy \\\n    software-properties-common \\\n    zip \\\n    && apt-get clean && rm -rf /tmp/* /var/tmp/*\n\nRUN cd ~ && \\\n    mkdir -p dlib && \\\n    git clone -b 'v19.9' --single-branch https://github.com/davisking/dlib.git dlib/ && \\\n    cd  dlib/ && \\\n    python3 setup.py install --yes USE_AVX_INSTRUCTIONS\n\n\n# The rest of this file just runs an example script.\n\n# If you wanted to use this Dockerfile to run your own app instead, maybe you would do this:\n# COPY . /root/your_app_or_whatever\n# RUN cd /root/your_app_or_whatever && \\\n#     pip3 install -r requirements.txt\n# RUN whatever_command_you_run_to_start_your_app\n\nCOPY . /root/face_recognition\nRUN cd /root/face_recognition && \\\n    pip3 install -r requirements.txt && \\\n    python3 setup.py install\n\n# Add pip3 install opencv-python==4.1.2.30 if you want to run the live webcam examples\n\nCMD cd /root/face_recognition/examples && \\\n    python3 recognize_faces_in_pictures.py\n",
      "docker-compose.yml": "version: '2.3'\n\nservices:\n  face_recognition:\n    image: face_recognition\n    container_name: face_recognition\n    working_dir: /face_recognition/examples\n    build:\n      context: .\n      #Uncomment this line to run the example on the GPU (requires Nvidia-Docker)\n      # dockerfile: Dockerfile.gpu \n    command: python3 -u find_faces_in_picture_cnn.py\n    volumes:\n      - ./:/face_recognition\n    #Uncomment this line to run the example on the GPU (requires Nvidia-Docker)\n    # runtime: nvidia"
    },
    "docker_setup_descriptions": {
      "Dockerfile": "To build and run a Docker image using the \"Dockerfile\" from the `ageitgey/face_recognition` repository, follow these steps:\n\n### Purpose of the Image\nThe Docker image is designed to facilitate the deployment of applications that utilize the `face_recognition` library, which is built on top of the `dlib` library. This image provides a pre-configured environment with all necessary dependencies for face recognition tasks, including image processing capabilities.\n\n### Dependencies\nThe image is based on a slim version of Python 3.10.3 and includes essential packages and libraries required for building and running the `face_recognition` library. Key dependencies include:\n\n- **System Libraries**: `build-essential`, `cmake`, `gfortran`, `git`, `wget`, `curl`, `graphicsmagick`, and various development libraries for image processing and numerical computations (e.g., `libjpeg-dev`, `libatlas-base-dev`, `libavcodec-dev`, etc.).\n- **Python Libraries**: The image installs Python packages like `numpy` and any additional libraries specified in a `requirements.txt` file located in the application directory.\n\n### Building Steps\n1. **Pull the Base Image**: Start with the official Python 3.10.3 slim image as the base.\n2. **Update Package List**: Update the package list to ensure you have the latest versions of the dependencies.\n3. **Install System Dependencies**: Install all required system packages and libraries necessary for compiling and running the `face_recognition` library and its dependencies.\n4. **Clone and Install dlib**: Clone the `dlib` repository from GitHub, check out a specific version, and install it using Python.\n5. **Copy Application Files**: Copy your application files into the image, specifically into the `/root/face_recognition` directory.\n6. **Install Python Dependencies**: Install any additional Python dependencies listed in your `requirements.txt` file and set up the application.\n7. **Set the Command**: Define the default command to run an example script that demonstrates face recognition functionality.\n\n### Running the Image\nAfter building the image, you can run it using Docker. The default command will execute a script that recognizes faces in pictures, demonstrating the capabilities of the `face_recognition` library.\n\n### Summary\nThis Docker image provides a streamlined environment for face recognition applications, ensuring all necessary dependencies are installed and configured correctly. By following the outlined steps, you can easily build and run your own applications based on the `face_recognition` library.",
      "docker-compose.yml": "To build and run the Docker container for the `ageitgey/face_recognition` repository using the provided `docker-compose.yml` file, follow these steps:\n\n### Purpose of the Image\nThe Docker image created from this configuration is designed to facilitate face recognition tasks using Python. It leverages the `face_recognition` library, which is built on top of the `dlib` library, providing capabilities for detecting and recognizing faces in images. This image is particularly useful for developers and researchers who want to experiment with or deploy face recognition applications without worrying about the underlying dependencies and environment setup.\n\n### Dependencies\nThe image includes essential dependencies such as Python, the `face_recognition` library, and any other libraries required for image processing and manipulation. The environment is pre-configured to run Python scripts that utilize these libraries effectively.\n\n### Building Steps\n1. **Clone the Repository**: Start by cloning the `ageitgey/face_recognition` repository to your local machine. This will provide you access to the `docker-compose.yml` file and the necessary codebase.\n\n2. **Navigate to the Directory**: Change your working directory to the root of the cloned repository where the `docker-compose.yml` file is located.\n\n3. **Build the Image**: Use Docker Compose to build the image. This process will read the `docker-compose.yml` file, set up the necessary environment, and install all dependencies defined in the context. The build context is set to the current directory, ensuring that all files are accessible during the build process.\n\n### Running the Container\n1. **Start the Service**: Once the image is built, you can start the face recognition service using Docker Compose. This will create a container named `face_recognition` and set the working directory inside the container to `/face_recognition/examples`.\n\n2. **Execute the Command**: The container will run the Python script `find_faces_in_picture_cnn.py`, which is designed to find faces in a given picture using a convolutional neural network (CNN). \n\n3. **Volume Mapping**: The current directory is mapped to the `/face_recognition` directory inside the container, allowing you to access and modify files easily. This setup is ideal for testing and development, as any changes made locally will be reflected inside the container.\n\n### Optional GPU Support\nIf you have a compatible NVIDIA GPU and want to leverage GPU acceleration, you can uncomment the relevant lines in the `docker-compose.yml` file. This will enable the use of NVIDIA Docker, allowing the container to utilize GPU resources for faster processing.\n\n### Conclusion\nBy following these steps, you will successfully build and run the face recognition Docker container, enabling you to experiment with face detection and recognition tasks efficiently."
    }
  },
  "input_to_gpt": {
    "repo_name": "ageitgey/face_recognition",
    "num_code_blocks": 15,
    "total_length": 3217,
    "code_blocks": [
      "import face_recognition\nimage = face_recognition.load_image_file(\"your_file.jpg\")\nface_locations = face_recognition.face_locations(image)",
      "import face_recognition\nimage = face_recognition.load_image_file(\"your_file.jpg\")\nface_landmarks_list = face_recognition.face_landmarks(image)",
      "import face_recognition\nknown_image = face_recognition.load_image_file(\"biden.jpg\")\nunknown_image = face_recognition.load_image_file(\"unknown.jpg\")\n\nbiden_encoding = face_recognition.face_encodings(known_image)[0]\nunknown_encoding = face_recognition.face_encodings(unknown_image)[0]\n\nresults = face_recognition.compare_faces([biden_encoding], unknown_encoding)",
      "pip3 install face_recognition",
      "pkg install graphics/py-face_recognition",
      "$ face_recognition ./pictures_of_people_i_know/ ./unknown_pictures/\n\n/unknown_pictures/unknown.jpg,Barack Obama\n/face_recognition_test/unknown_pictures/unknown.jpg,unknown_person",
      "$ face_detection  ./folder_with_pictures/\n\nexamples/image1.jpg,65,215,169,112\nexamples/image2.jpg,62,394,211,244\nexamples/image2.jpg,95,941,244,792",
      "$ face_recognition --tolerance 0.54 ./pictures_of_people_i_know/ ./unknown_pictures/\n\n/unknown_pictures/unknown.jpg,Barack Obama\n/face_recognition_test/unknown_pictures/unknown.jpg,unknown_person",
      "$ face_recognition --show-distance true ./pictures_of_people_i_know/ ./unknown_pictures/\n\n/unknown_pictures/unknown.jpg,Barack Obama,0.378542298956785\n/face_recognition_test/unknown_pictures/unknown.jpg,unknown_person,None",
      "$ face_recognition ./pictures_of_people_i_know/ ./unknown_pictures/ | cut -d ',' -f2\n\nBarack Obama\nunknown_person",
      "$ face_recognition --cpus 4 ./pictures_of_people_i_know/ ./unknown_pictures/",
      "import face_recognition\n\nimage = face_recognition.load_image_file(\"my_picture.jpg\")\nface_locations = face_recognition.face_locations(image)\n\n# face_locations is now an array listing the co-ordinates of each face!",
      "import face_recognition\n\nimage = face_recognition.load_image_file(\"my_picture.jpg\")\nface_locations = face_recognition.face_locations(image, model=\"cnn\")\n\n# face_locations is now an array listing the co-ordinates of each face!",
      "import face_recognition\n\nimage = face_recognition.load_image_file(\"my_picture.jpg\")\nface_landmarks_list = face_recognition.face_landmarks(image)\n\n# face_landmarks_list is now an array with the locations of each facial feature in each face.\n# face_landmarks_list[0]['left_eye'] would be the location and outline of the first person's left eye.",
      "import face_recognition\n\npicture_of_me = face_recognition.load_image_file(\"me.jpg\")\nmy_face_encoding = face_recognition.face_encodings(picture_of_me)[0]\n\n# my_face_encoding now contains a universal 'encoding' of my facial features that can be compared to any other picture of a face!\n\nunknown_picture = face_recognition.load_image_file(\"unknown.jpg\")\nunknown_face_encoding = face_recognition.face_encodings(unknown_picture)[0]\n\n# Now we can see the two face encodings are of the same person with `compare_faces`!\n\nresults = face_recognition.compare_faces([my_face_encoding], unknown_face_encoding)\n\nif results[0] == True:\n    print(\"It's a picture of me!\")\nelse:\n    print(\"It's not a picture of me!\")"
    ]
  }
}