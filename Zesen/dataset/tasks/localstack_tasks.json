{
  "tasks": [
    {
      "task_title": "å¯åŠ¨ LocalStack",
      "task_description": "ä½¿ç”¨ LocalStack CLI å¯åŠ¨ LocalStack æœåŠ¡ï¼Œè¿è¡Œåœ¨ Docker æ¨¡å¼ä¸‹ã€‚",
      "example_code": null,
      "running_command": "localstack start -d",
      "expected_input": null,
      "expected_output": "starting LocalStack in Docker mode ðŸ³"
    },
    {
      "task_title": "æ£€æŸ¥æœåŠ¡çŠ¶æ€",
      "task_description": "ä½¿ç”¨ LocalStack CLI æŸ¥çœ‹å½“å‰å¯ç”¨æœåŠ¡çš„çŠ¶æ€ã€‚",
      "example_code": null,
      "running_command": "localstack status services",
      "expected_input": null,
      "expected_output": "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”“\nâ”ƒ Service                  â”ƒ Status      â”ƒ\nâ”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”©\nâ”‚ acm                      â”‚ âœ” available â”‚\nâ”‚ apigateway               â”‚ âœ” available â”‚\nâ”‚ cloudformation           â”‚ âœ” available â”‚\nâ”‚ cloudwatch               â”‚ âœ” available â”‚\nâ”‚ config                   â”‚ âœ” available â”‚\nâ”‚ dynamodb                 â”‚ âœ” available â”‚\n..."
    },
    {
      "task_title": "åˆ›å»º SQS é˜Ÿåˆ—",
      "task_description": "ä½¿ç”¨ awslocal å‘½ä»¤åˆ›å»ºä¸€ä¸ªæ–°çš„ SQS é˜Ÿåˆ—ï¼ŒæŒ‡å®šé˜Ÿåˆ—åç§°ã€‚",
      "example_code": null,
      "running_command": "awslocal sqs create-queue --queue-name sample-queue",
      "expected_input": "sample-queue",
      "expected_output": "{\n    \"QueueUrl\": \"http://sqs.us-east-1.localhost.localstack.cloud:4566/000000000000/sample-queue\"\n}"
    }
  ],
  "setup": {
    "setup_commands": [
      "brew install localstack/tap/localstack-cli",
      "python3 -m pip install localstack"
    ],
    "docker_commands": [],
    "docker_files": {
      "Dockerfile": "#\n# base: Stage which installs necessary runtime dependencies (OS packages, etc.)\n#\nFROM python:3.13.9-slim-trixie@sha256:0222b795db95bf7412cede36ab46a266cfb31f632e64051aac9806dabf840a61 AS base\nARG TARGETARCH\n\n# Install runtime OS package dependencies\nRUN --mount=type=cache,target=/var/cache/apt \\\n    apt-get update && \\\n        # Install dependencies to add additional repos\n        apt-get install -y --no-install-recommends \\\n            # Runtime packages (groff-base is necessary for AWS CLI help)\n            ca-certificates curl gnupg git make openssl tar pixz zip unzip groff-base iputils-ping nss-passwords procps iproute2 xz-utils libatomic1 binutils && \\\n        # patch for CVE-2024-45490, CVE-2024-45491, CVE-2024-45492\n        apt-get install --only-upgrade libexpat1\n\n# Install nodejs package from the dist release server. Note: we're installing from dist binaries, and not via\n#  `apt-get`, to avoid installing `python3.11` into the image (which otherwise comes as a dependency of nodejs).\n# See https://github.com/nodejs/docker-node/blob/main/22/trixie/Dockerfile\nRUN ARCH= && dpkgArch=\"$(dpkg --print-architecture)\" \\\n  && case \"${dpkgArch##*-}\" in \\\n    amd64) ARCH='x64';; \\\n    arm64) ARCH='arm64';; \\\n    *) echo \"unsupported architecture\"; exit 1 ;; \\\n  esac \\\n  # gpg keys listed at https://github.com/nodejs/node#release-keys\n  && set -ex \\\n  && for key in \\\n    5BE8A3F6C8A5C01D106C0AD820B1A390B168D356 \\\n    DD792F5973C6DE52C432CBDAC77ABFA00DDBF2B7 \\\n    CC68F5A3106FF448322E48ED27F5E38D5B0A215F \\\n    8FCCA13FEF1D0C2E91008E09770F7A9A5AE15600 \\\n    890C08DB8579162FEE0DF9DB8BEAB4DFCF555EF4 \\\n    C82FA3AE1CBEDC6BE46B9360C43CEC45C17AB93C \\\n    108F52B48DB57BB0CC439B2997B01419BD92F80A \\\n    A363A499291CBBC940DD62E41F10027AF002F8B0 \\\n  ; do \\\n      gpg --batch --keyserver hkps://keys.openpgp.org --recv-keys \"$key\" || \\\n      gpg --batch --keyserver keyserver.ubuntu.com --recv-keys \"$key\" ; \\\n  done \\\n  && curl -LO https://nodejs.org/dist/latest-v22.x/SHASUMS256.txt \\\n  && LATEST_VERSION_FILENAME=$(cat SHASUMS256.txt | grep -o \"node-v.*-linux-$ARCH\" | sort | uniq) \\\n  && rm SHASUMS256.txt \\\n  && curl -fsSLO --compressed \"https://nodejs.org/dist/latest-v22.x/$LATEST_VERSION_FILENAME.tar.xz\" \\\n  && curl -fsSLO --compressed \"https://nodejs.org/dist/latest-v22.x/SHASUMS256.txt.asc\" \\\n  && gpg --batch --decrypt --output SHASUMS256.txt SHASUMS256.txt.asc \\\n  && grep \" $LATEST_VERSION_FILENAME.tar.xz\\$\" SHASUMS256.txt | sha256sum -c - \\\n  && tar -xJf \"$LATEST_VERSION_FILENAME.tar.xz\" -C /usr/local --strip-components=1 --no-same-owner \\\n  && rm \"$LATEST_VERSION_FILENAME.tar.xz\" SHASUMS256.txt.asc SHASUMS256.txt \\\n  && ln -s /usr/local/bin/node /usr/local/bin/nodejs \\\n  # upgrade npm to the latest version\n  && npm upgrade -g npm \\\n  # smoke tests\n  && node --version \\\n  && npm --version \\\n  && test ! $(which python3.9)\n\nSHELL [ \"/bin/bash\", \"-c\" ]\nENV LANG=C.UTF-8\n\n# set workdir\nRUN mkdir -p /opt/code/localstack\nRUN mkdir /opt/code/localstack/localstack-core\nWORKDIR /opt/code/localstack/\n\n# create localstack user and filesystem hierarchy, perform some permission fixes\nRUN chmod 777 . && \\\n    useradd -ms /bin/bash localstack && \\\n    mkdir -p /var/lib/localstack && \\\n    chmod -R 777 /var/lib/localstack && \\\n    mkdir -p /usr/lib/localstack && \\\n    mkdir /tmp/localstack && \\\n    chmod -R 777 /tmp/localstack && \\\n    touch /tmp/localstack/.marker && \\\n    mkdir -p /.npm && \\\n    chmod 755 /root && \\\n    chmod -R 777 /.npm\n\n# install the entrypoint script\nADD bin/docker-entrypoint.sh /usr/local/bin/\n# add the shipped hosts file to prevent performance degredation in windows container mode on windows\n# (where hosts file is not mounted) See https://github.com/localstack/localstack/issues/5178\nADD bin/hosts /etc/hosts\n\n# expose default environment\n# Set edge bind host so localstack can be reached by other containers\n# set library path and default LocalStack hostname\nENV USER=localstack\nENV PYTHONUNBUFFERED=1\n\n# Install the latest version of awslocal globally\nRUN --mount=type=cache,target=/root/.cache \\\n    pip3 install --upgrade awscli awscli-local requests\n\n\n#\n# builder: Stage which installs the dependencies of LocalStack Community\n#\nFROM base AS builder\nARG TARGETARCH\n\n# Install build dependencies to base\nRUN --mount=type=cache,target=/var/cache/apt \\\n    apt-get update && \\\n        # Install dependencies to add additional repos\n        # g++ is a workaround to fix the JPype1 compile error on ARM Linux \"gcc: fatal error: cannot execute â€˜cc1plusâ€™\"\n        apt-get install -y gcc g++\n\n# upgrade python build tools\nRUN --mount=type=cache,target=/root/.cache \\\n    (python -m venv .venv && . .venv/bin/activate && pip3 install --upgrade pip wheel setuptools)\n\n# add files necessary to install runtime dependencies\nADD Makefile pyproject.toml requirements-runtime.txt ./\n# add the localstack start scripts (necessary for the installation of the runtime dependencies, i.e. `pip install -e .`)\nADD bin/localstack bin/localstack.bat bin/localstack-supervisor bin/\n\n# Install dependencies for running the LocalStack runtime\nRUN --mount=type=cache,target=/root/.cache\\\n    . .venv/bin/activate && pip3 install -r requirements-runtime.txt\n\n\n#\n# final stage: Builds upon base stage and copies resources from builder stages\n#\nFROM base\nCOPY --from=builder /opt/code/localstack/.venv /opt/code/localstack/.venv\n# The build version is set in the docker-helper.sh script to be the output of setuptools_scm\nARG LOCALSTACK_BUILD_VERSION\n\n# add project files necessary to install all dependencies\nADD Makefile pyproject.toml ./\n# add the localstack start scripts (necessary for the installation of the runtime dependencies, i.e. `pip install -e .`)\nADD bin/localstack bin/localstack.bat bin/localstack-supervisor bin/\n\n# add the code as late as possible\nADD localstack-core/ /opt/code/localstack/localstack-core\n\n# Install LocalStack Community and generate the version file while doing so\nRUN --mount=type=cache,target=/root/.cache \\\n    . .venv/bin/activate && \\\n    SETUPTOOLS_SCM_PRETEND_VERSION_FOR_LOCALSTACK_CORE=${LOCALSTACK_BUILD_VERSION} \\\n    pip install -e .[runtime]\n\n# Generate the plugin entrypoints\nRUN SETUPTOOLS_SCM_PRETEND_VERSION_FOR_LOCALSTACK_CORE=${LOCALSTACK_BUILD_VERSION} \\\n    make entrypoints\n\n# Generate service catalog cache in static libs dir\nRUN . .venv/bin/activate && python3 -m localstack.aws.spec\n\n# Install packages which should be shipped by default\nRUN --mount=type=cache,target=/root/.cache \\\n    --mount=type=cache,target=/var/lib/localstack/cache \\\n    source .venv/bin/activate && \\\n    python -m localstack.cli.lpm install \\\n      lambda-runtime \\\n      jpype-jsonata \\\n      dynamodb-local && \\\n    chown -R localstack:localstack /usr/lib/localstack && \\\n    chmod -R 777 /usr/lib/localstack\n\n# link the python package installer virtual environments into the localstack venv\nRUN echo /var/lib/localstack/lib/python-packages/lib/python3.13/site-packages > localstack-var-python-packages-venv.pth && \\\n    mv localstack-var-python-packages-venv.pth .venv/lib/python*/site-packages/\nRUN echo /usr/lib/localstack/python-packages/lib/python3.13/site-packages > localstack-static-python-packages-venv.pth && \\\n    mv localstack-static-python-packages-venv.pth .venv/lib/python*/site-packages/\n\n# expose edge service, external service ports, and debugpy\nEXPOSE 4566 4510-4559 5678\n\nHEALTHCHECK --interval=10s --start-period=15s --retries=5 --timeout=10s CMD /opt/code/localstack/.venv/bin/localstack status services --format=json\n\n# default volume directory\nVOLUME /var/lib/localstack\n\n# mark the image version\nRUN touch /usr/lib/localstack/.community-version\n\nLABEL authors=\"LocalStack Contributors\"\nLABEL maintainer=\"LocalStack Team (info@localstack.cloud)\"\nLABEL description=\"LocalStack Docker image\"\n\n# Add the build date and git hash at last (changes everytime)\nARG LOCALSTACK_BUILD_DATE\nARG LOCALSTACK_BUILD_GIT_HASH\nENV LOCALSTACK_BUILD_DATE=${LOCALSTACK_BUILD_DATE}\nENV LOCALSTACK_BUILD_GIT_HASH=${LOCALSTACK_BUILD_GIT_HASH}\nENV LOCALSTACK_BUILD_VERSION=${LOCALSTACK_BUILD_VERSION}\n\n# define command at startup\nENTRYPOINT [\"docker-entrypoint.sh\"]\n",
      "docker-compose.yml": "services:\n  localstack:\n    container_name: \"${LOCALSTACK_DOCKER_NAME:-localstack-main}\"\n    image: localstack/localstack\n    ports:\n      - \"127.0.0.1:4566:4566\"            # LocalStack Gateway\n      - \"127.0.0.1:4510-4559:4510-4559\"  # external services port range\n    environment:\n      # LocalStack configuration: https://docs.localstack.cloud/references/configuration/\n      - DEBUG=${DEBUG:-0}\n    volumes:\n      - \"${LOCALSTACK_VOLUME_DIR:-./volume}:/var/lib/localstack\"\n      - \"/var/run/docker.sock:/var/run/docker.sock\"\n",
      ".dockerignore": ".venv*\n\n.filesystem\n**/.filesystem\n\n# ignore files generated in CI build\ntests/aws/**/node_modules\ntests/aws/**/.terraform\n**/__pycache__\ntarget/\nhtmlcov/\n.coverage\n"
    },
    "docker_setup_descriptions": {
      "Dockerfile": "To build and run a Docker image using the `Dockerfile` from the `localstack/localstack` repository, follow these steps:\n\n### Purpose of the Image\nThe Docker image created from this `Dockerfile` is designed to run LocalStack, a fully functional local AWS cloud stack. It allows developers to simulate AWS services locally for testing and development purposes without needing to connect to the actual AWS cloud. The image includes all necessary dependencies and configurations to run LocalStack efficiently.\n\n### Building Steps\n1. **Base Image**: The build process starts with a lightweight Python 3.13.9 base image, which provides the necessary runtime environment. This image is optimized for size and includes essential OS packages.\n\n2. **Install Runtime Dependencies**: The build process installs various runtime dependencies, including tools like `curl`, `git`, and `openssl`, as well as libraries required for the AWS CLI and LocalStack functionality. This ensures that the environment is equipped to handle requests and manage AWS services.\n\n3. **Node.js Installation**: The image installs Node.js from the official distribution, ensuring compatibility with LocalStack's requirements. This step also includes verifying the installation through smoke tests.\n\n4. **User and Directory Setup**: A dedicated user (`localstack`) is created to run the application, and necessary directories are established with appropriate permissions. This enhances security and ensures that LocalStack has the required filesystem structure.\n\n5. **Install Python Packages**: The image installs the AWS CLI and `awslocal`, a command-line tool for interacting with LocalStack, using Python's package manager. This step is crucial for enabling AWS service emulation.\n\n6. **Build Stage**: In a separate build stage, additional build dependencies are installed, and the LocalStack runtime dependencies are set up. This includes creating a virtual environment for Python packages, which isolates the LocalStack installation.\n\n7. **Final Assembly**: The final image is constructed by copying the necessary files and dependencies from the previous stages. This includes the LocalStack core code and any additional scripts needed to start LocalStack.\n\n8. **Health Checks and Configuration**: The image includes health checks to monitor the status of LocalStack services and exposes necessary ports for communication. Environment variables are set for versioning and build metadata.\n\n### Running the Image\nAfter building the image, you can run it using Docker. The container will start LocalStack, allowing you to interact with the simulated AWS services. Ensure to map any required ports and volumes for persistent data storage.\n\n### Dependencies\nThe image relies on several key dependencies:\n- **Python**: For running LocalStack and its associated scripts.\n- **Node.js**: Required for certain LocalStack functionalities.\n- **AWS CLI**: For interacting with AWS services.\n- **Various OS Packages**: Essential for network operations and system interactions.\n\nBy following these steps, you can successfully build and run the LocalStack Docker image, enabling local development and testing of AWS services.",
      "docker-compose.yml": "To build and run Docker using the `docker-compose.yml` file from the `localstack/localstack` repository, follow these steps:\n\n### Purpose of the Image\nThe `localstack/localstack` image is designed to provide a fully functional local AWS cloud stack, enabling developers to simulate AWS services on their local machines. This is particularly useful for testing and development purposes, allowing you to interact with AWS services without incurring costs or requiring internet access.\n\n### Dependencies\nThe image relies on several components:\n- **Docker**: LocalStack utilizes Docker to run various AWS service emulations in isolated containers.\n- **Python**: As LocalStack is built using Python, it requires Python dependencies for its functionality.\n- **AWS SDKs**: LocalStack supports various AWS SDKs for integration, allowing you to interact with the emulated services.\n\n### Building Steps\n1. **Clone the Repository**: Start by cloning the `localstack/localstack` repository to your local machine. This will provide you with access to the `docker-compose.yml` file.\n\n2. **Navigate to the Directory**: Change your working directory to the location where the `docker-compose.yml` file is located.\n\n3. **Configure Environment Variables**: Before building, you may want to configure environment variables such as `LOCALSTACK_DOCKER_NAME`, `DEBUG`, and `LOCALSTACK_VOLUME_DIR` to customize the behavior of LocalStack. These can be set in your shell or included in a `.env` file.\n\n4. **Build the Image**: Use Docker Compose to build the LocalStack image. This process will pull the necessary base images and dependencies, setting up the environment for LocalStack to run.\n\n5. **Run the Container**: Once the image is built, you can start the LocalStack container. The container will expose the LocalStack Gateway on port 4566 and a range of ports (4510-4559) for various AWS services.\n\n6. **Data Persistence**: LocalStack will store its data in a volume mapped to your local directory (as specified in the `docker-compose.yml`), ensuring that your configurations and state persist across restarts.\n\n### Running Commands\nTo run LocalStack, execute the appropriate Docker Compose command to start the services defined in the `docker-compose.yml`. This will initialize the LocalStack environment, allowing you to interact with the emulated AWS services.\n\n### Summary\nBy following these steps, you will successfully build and run the LocalStack Docker image, enabling you to develop and test AWS applications locally without the need for actual AWS resources.",
      ".dockerignore": "To build and run a Docker image using the `.dockerignore` file from the `localstack/localstack` repository, follow these steps:\n\n### Purpose of the Image\nThe Docker image for LocalStack is designed to provide a fully functional local AWS cloud stack for testing and development purposes. It allows developers to simulate AWS services locally, enabling them to build and test applications without incurring costs or needing access to the actual AWS environment. The image typically includes dependencies such as Python, various AWS SDKs, and tools necessary to run and manage the simulated services.\n\n### Building Steps\n1. **Clone the Repository**: Start by cloning the `localstack/localstack` repository to your local machine. This will give you access to the necessary files, including the `.dockerignore` and Dockerfile.\n\n2. **Navigate to the Directory**: Change your working directory to the cloned repository where the Dockerfile is located.\n\n3. **Review the .dockerignore File**: The `.dockerignore` file is crucial as it specifies which files and directories should be excluded from the Docker build context. This helps to reduce the image size and build time by ignoring unnecessary files such as:\n   - Virtual environment directories (e.g., `.venv*`)\n   - Temporary files and directories (e.g., `target/`, `htmlcov/`)\n   - CI-generated files (e.g., `tests/aws/**/node_modules`, `tests/aws/**/.terraform`)\n   - Python cache files (e.g., `**/__pycache__`)\n\n4. **Build the Image**: Use the Docker build command to create the image. This process will read the Dockerfile and build the image according to the specified instructions, while respecting the exclusions defined in the `.dockerignore` file. The build process may take some time as it pulls the necessary base images and installs the required dependencies.\n\n5. **Run the Image**: After successfully building the image, you can run it using Docker. This will start a container based on the image, allowing you to interact with the LocalStack services. Ensure that you configure the container with the appropriate environment variables and port mappings to access the simulated AWS services.\n\n### Summary\nBy following these steps, you will have a Docker image that encapsulates the LocalStack environment, ready for local development and testing of AWS applications. The use of the `.dockerignore` file ensures that your image remains lightweight and free from unnecessary files, optimizing both build time and performance."
    }
  },
  "input_to_gpt": {
    "repo_name": "localstack/localstack",
    "num_code_blocks": 3,
    "total_length": 1368,
    "code_blocks": [
      " % localstack start -d\n\n     __                     _______ __             __\n    / /   ____  _________ _/ / ___// /_____ ______/ /__\n   / /   / __ \\/ ___/ __ `/ /\\__ \\/ __/ __ `/ ___/ //_/\n  / /___/ /_/ / /__/ /_/ / /___/ / /_/ /_/ / /__/ ,<\n /_____/\\____/\\___/\\__,_/_//____/\\__/\\__,_/\\___/_/|_|\n\n- LocalStack CLI: 4.9.0\n- Profile: default\n- App: https://app.localstack.cloud\n\n[17:00:15] starting LocalStack in Docker mode ðŸ³               localstack.py:512\n           preparing environment                               bootstrap.py:1322\n           configuring container                               bootstrap.py:1330\n           starting container                                  bootstrap.py:1340\n[17:00:16] detaching                                           bootstrap.py:1344",
      "% localstack status services\nâ”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”³â”â”â”â”â”â”â”â”â”â”â”â”â”â”“\nâ”ƒ Service                  â”ƒ Status      â”ƒ\nâ”¡â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•‡â”â”â”â”â”â”â”â”â”â”â”â”â”â”©\nâ”‚ acm                      â”‚ âœ” available â”‚\nâ”‚ apigateway               â”‚ âœ” available â”‚\nâ”‚ cloudformation           â”‚ âœ” available â”‚\nâ”‚ cloudwatch               â”‚ âœ” available â”‚\nâ”‚ config                   â”‚ âœ” available â”‚\nâ”‚ dynamodb                 â”‚ âœ” available â”‚\n...",
      "% awslocal sqs create-queue --queue-name sample-queue\n{\n    \"QueueUrl\": \"http://sqs.us-east-1.localhost.localstack.cloud:4566/000000000000/sample-queue\"\n}"
    ]
  }
}